<% provide(:title, 'Manage Users') %>
<div class="container">
  <h4 class="display-4 aheading animated fadeInDown faster">Manage Users</h4>
  <br>
  <table class="table admin-users-table table-hover" style="font-size:14px; width:100%">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Username</th>
        <th scope="col">Email</th>
        <th scope="col">Department</th>
        <th scope="col">Admin?</th>
        <th scope="col">Last Seen</th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
      <% @users.each do |user| %>
        <tr>
          <td scope="row"><%= user.id %></td>
          <td><%= user.username %></td>
          <td><%= user.email %></td>
          <td><%= user.department.name %></td>
          <td><%= user.admin %></td>
          <td><%= user.last_seen_at.in_time_zone("Hong Kong").strftime("%Y-%m-%d %I:%M%p") if user.last_seen_at %></td>
          <td>
            <%= link_to edit_user_path(user), method: :get, data: {} do %>
              <button class="btn btn-sm btn-secondary dt-btn" aria-label="Edit User"><i class="fas fa-user-edit"></i></button>
            <% end %>
            <%= link_to user, method: :delete,
                                  data: { confirm: "Do you want to delete this user?" } do %>
              <button class="btn btn-sm btn-danger dt-btn" aria-label="Delete User"><i class="fas fa-trash"></i></button>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
