<% provide(:title, 'Manage Users') %>
<div class="container">
    <h2 class="display-2" style="margin:1em 0 0.5em 0">Manage Users</h2>
    <br>
    <table class="table manage-table" style="font-size:14px; width:100%">
        <thead>
            <tr>
            <th scope="col">#</th>
            <th scope="col">Username</th>
            <th scope="col">Email</th>
            <th scope="col">Department</th>
            <th scope="col">Admin?</th>
            <th scope="col">Last Seen</th>
            <th scope="col"></th>
            </tr>
        </thead>
        <tbody>
            <% @users.each do |user| %>
                <tr>
                    <th scope="row"><%= user.id %></th>
                    <td><%= user.username %></td>
                    <td><%= user.email %></td>
                    <td><%= user.department.name %></td>
                    <td><%= user.admin %></td>
                    <td><%= user.last_seen_at.in_time_zone("Hong Kong") if user.last_seen_at %></td>
                    <td>
                        <%= link_to edit_user_path(user), method: :get, data: {} do %>
                            <button class="btn btn-sm btn-outline-info dt-btn" aria-label="Edit User"><i class="fas fa-user-edit"></i></button>
                        <% end %>
                        <%= link_to user, method: :delete,
                                  data: { confirm: "Do you want to delete this user?" } do %>
                            <button class="btn btn-sm btn-danger dt-btn" aria-label="Delete User"><i class="fas fa-trash"></i></button>
                        <% end %>
                    </td>
                </tr>
            <% end %>
        </tbody>
    </table>
</div>